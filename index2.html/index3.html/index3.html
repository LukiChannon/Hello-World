<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>To‑Do‑Liste</title>
  <style>
    :root {
      --bg: #f7f7f8;
      --card: #ffffff;
      --muted: #6b7280;
      --accent: #3b82f6;
      --danger: #ef4444;
      --input-bg: #f1f3f5; /* grauer Hintergrund fürs Eingabefeld */
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 32px; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--bg); color: #0f172a;
    }
    .app {
      max-width: 680px; margin: 0 auto; background: var(--card); border-radius: 16px; padding: 24px; box-shadow: 0 6px 24px rgba(0,0,0,.07);
    }
    h1 { margin: 0 0 16px; font-weight: 700; font-size: 1.4rem; }

    /* Formular */
    form { display: flex; gap: 12px; }
    input[type="text"] {
      flex: 1; border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px 14px; font-size: 1rem;
      background: var(--input-bg);
    }
    input::placeholder { color: var(--muted); }
    button#add-btn {
      border: 0; border-radius: 12px; padding: 12px 16px; font-weight: 600; cursor: pointer;
      background: var(--accent); color: #fff; transition: transform .04s ease, filter .2s ease;
    }
    button#add-btn:active { transform: translateY(1px); }

    /* Liste */
    ul { list-style: none; padding: 0; margin: 18px 0 0; }
    li {
      display: grid; grid-template-columns: auto 1fr auto; align-items: center;
      gap: 12px; padding: 10px 12px; border: 1px solid #e5e7eb; border-radius: 12px; margin-bottom: 10px; background: #fff;
    }
    .text { word-break: break-word; }

    .remove-btn {
      border: 0; background: transparent; color: var(--danger); font-size: 1rem; cursor: pointer; padding: 6px 8px;
    }

    .empty { color: var(--muted); text-align: center; padding: 16px; }
  </style>
</head>
<body>
  <div class="app">
    <h1>Meine To‑Do‑Liste</h1>

    <form id="todo-form" autocomplete="off">
      <input id="todo-input" type="text" placeholder="Neuen Eintrag hinzufügen …" aria-label="Neuen Eintrag hinzufügen" />
      <button id="add-btn" type="submit">Hinzufügen</button>
    </form>

    <ul id="todo-list" aria-live="polite"></ul>
    <div id="empty-state" class="empty">Noch keine Einträge – leg los! ✨</div>
  </div>

  <script>
    (function () {
      const STORAGE_KEY = "todos.v1";
      const form = document.getElementById("todo-form");
      const input = document.getElementById("todo-input");
      const list = document.getElementById("todo-list");
      const empty = document.getElementById("empty-state");

      /** @type {string[]} */
      let todos = [];

      function load() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          todos = raw ? JSON.parse(raw) : [];
        } catch (e) {
          todos = [];
        }
        render();
      }

      function save() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
      }

      function render() {
        list.innerHTML = "";
        if (!todos.length) {
          empty.style.display = "block";
          return;
        }
        empty.style.display = "none";
        for (const [idx, text] of todos.entries()) {
          const li = document.createElement("li");

          const bullet = document.createElement("span");
          bullet.textContent = "•";
          bullet.setAttribute("aria-hidden", "true");

          const span = document.createElement("span");
          span.className = "text";
          span.textContent = text;

          const del = document.createElement("button");
          del.className = "remove-btn";
          del.type = "button";
          del.title = "Eintrag löschen";
          del.setAttribute("aria-label", `Eintrag "+text+" löschen`);
          del.textContent = "✕";
          del.addEventListener("click", () => {
            todos.splice(idx, 1);
            save();
            render();
          });

          li.appendChild(bullet);
          li.appendChild(span);
          li.appendChild(del);
          list.appendChild(li);
        }
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const value = input.value.trim();
        if (!value) return; // leere Eingaben ignorieren
        todos.push(value);
        input.value = "";
        save();
        render();
        input.focus();
      });

      // Initial
      load();
    })();
  </script>
</body>
</html>
